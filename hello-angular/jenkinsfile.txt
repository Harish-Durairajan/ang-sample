pipeline {
    agent any
     parameters {
        string description: 'Please enter the repository url', name: 'Git-url'
        string description: 'Please enter the S3 bucket value', name: 'S3-bucket-name'
    }
    
    stages{
	stage("clearing the workspace"){
            steps{
                cleanWs()
            }
        }
        stage("pulling the source"){
            steps{
		checkout([$class: 'GitSCM', branches: [[name: '*/master']],
    		userRemoteConfigs: [[url: "${params.Git-url}"]]])
                
		// 'git remote add origin "https://github.com/Harish-Durairajan/AngularSample.git"'
		
		 
            }
        }
	stage("pulling latest source"){
            steps{
		sh "git init"
                sh "git pull origin master"
            }
        }        
        stage("building the angular application"){
            steps{
		sh "ng build"
            }
        }
        stage("pushing s3 bucket"){
            steps{
              sh "aws s3 cp /hello-angular s3://${S3-bucket-name} --recursive"
            }
        }      

    }
}

